<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Item Details</title>
    <link rel="stylesheet" href="./style.css">
</head>

<body>

<!-- Top Buttons -->
<button class="top-btn back-btn" onclick="goBack()">â¬… Back</button>
<button class="top-btn proceed-btn" onclick="proceedPayment()">Proceed â–¶</button>

<!-- Hidden receipt for printing -->
<div id="print-area" style="display:none">
    <h2>BABA Canteen</h2>
    <p><strong>Item:</strong> <span id="rItem"></span></p>
    <p><strong>Amount Paid:</strong> â‚¹<span id="rPrice"></span></p>
    <p><strong>Payment Method:</strong> <span id="rMethod"></span></p>
    <p><strong>Status:</strong> SUCCESS</p>
    <hr>
    <p>Thank you! Visit Again</p>
</div>

<div class="container item-container">

    <!-- Item Details -->
    <img id="itemImg" class="item-img"><br><br>

    <h2 id="itemName"></h2>
    <h3 id="itemPrice"></h3>

    <hr style="margin:30px 0">

    <!-- Payment Section -->
    <h3>Choose Payment Method</h3>

    <div class="payment-buttons">
        <button class="pay-option cash-btn" onclick="selectPayment('Cash')">
            ðŸ’µ Cash
        </button>

        <button class="pay-option upi-btn" onclick="selectPayment('UPI')">
            ðŸ“± UPI
        </button>
    </div>

    <!-- QR Section -->
    <div id="upi-section" style="display:none; margin-top:20px;">
        <p>Scan UPI QR Code</p>
        <img
            src="upi-qr.jpg"
            class="qr-img"
            onclick="openQR()"
            alt="UPI QR Code"
        >
        <p style="font-size:14px;color:gray">
            Click QR to view full size
        </p>
    </div>

</div>

<script>
    const params = new URLSearchParams(window.location.search);

    const itemName = params.get("name");
    const itemPrice = params.get("price");
    const itemImg = params.get("img");

    document.getElementById("itemName").textContent = itemName;
    document.getElementById("itemPrice").textContent = "â‚¹" + itemPrice;
    document.getElementById("itemImg").src = itemImg;

    // receipt values
    document.getElementById("rItem").textContent = itemName;
    document.getElementById("rPrice").textContent = itemPrice;

    let selectedPayment = null;

    function goBack() {
        window.location.href = "index.html";
    }

    function openQR() {
        window.location.href = "upi-qr.jpg";
    }

    function selectPayment(method) {
        selectedPayment = method;
        document.getElementById("rMethod").textContent = method;

        if (method === "UPI") {
            document.getElementById("upi-section").style.display = "block";
        } else {
            document.getElementById("upi-section").style.display = "none";
        }
    }

    // PAYMENT â†’ PRINT â†’ RETURN TO MENU
    function proceedPayment() {
        if (!selectedPayment) {
            alert("Please select a payment method first.");
            return;
        }

        alert("Payment Successful!");

        const printArea = document.getElementById("print-area").innerHTML;
        const originalPage = document.body.innerHTML;

        document.body.innerHTML = printArea;
        window.print();

        document.body.innerHTML = originalPage;

        setTimeout(() => {
            window.location.href = "index.html";
        }, 500);
    }
</script>

</body>
</html>
